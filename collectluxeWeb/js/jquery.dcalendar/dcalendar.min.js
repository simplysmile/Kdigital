$.fn.dcalendar=function(t){return $(this).each(function(){var w=$(this);if(!w.hasClass("installed-")){var C=$.extend(!0,{today:moment(),viewTodayButton:!1,selectToday:!1,allowSelectSelectedDate:!1,allowUnselectSelectedDate:!1,dateIsAvailable:function(t){return t.isSameOrAfter(moment(moment().format("YYYY-MM-DD")))},beforeDrawMonth:function(t,a){a(t)},onDrawMonth:function(t){},onDrawDate:function(t,a){},onSelectDate:function(t,a){},onUnselectDate:function(t,a){}},t);w.addClass("dcalendar installed-");var M=!1;g(C.today),w.bind("dcalendar-draw-month",function(t,a){g(C.today=a)})}function g(t){"function"==typeof C.beforeDrawMonth?M||(M=!0,C.beforeDrawMonth(t,a)):a(t)}function a(a){M=!1,w.empty();var t=$("<div />").addClass("date-control").appendTo(w),e=$("<div />").addClass("date").html(a.format("YYYY.MM")).appendTo(t),n=$('<button type="button" />').addClass("prev-month").appendTo(e);$('<span class="fa fa-caret-left" />').appendTo(n);var d=$('<button type="button" />').addClass("next-month").appendTo(e);if($('<span class="fa fa-caret-right" />').appendTo(d),n.click(function(t){t.preventDefault(),g(moment(a).subtract(1,"month"))}),d.click(function(t){t.preventDefault(),g(moment(a).add(1,"month"))}),C.viewTodayButton){var o=$("<div />").addClass("view-today").appendTo(w);$('<button type="button" />').text("TODAY").appendTo(o).click(function(t){t.preventDefault(),g(moment())})}var s,l,i,p=$("<table />").appendTo(w),c=$("<thead />").appendTo(p),r=$("<tbody />").appendTo(p);s=$("<tr />").appendTo(c);for(var f=0;f<7;f++)l=$("<th />").text(moment().day(f).locale("en").format("ddd")).appendTo(s),0==f?l.addClass("sun"):6==f&&l.addClass("sat");s=$("<tr />").appendTo(r),$('<td colspan="7" class="spacing-" />').appendTo(s);var m=moment(a.format("YYYY-MM-01")),u=moment(moment(m).add(1,"month").subtract(1,"day").format("YYYY-MM-DD")),v=0;for(f=0;f<u.date();f++){var T=moment(m).add(f,"day");if(0==f){s=$("<tr />").appendTo(r);for(var h=0;h<m.day();h++){i=$("<td />").appendTo(s);var D=$('<div class="date-wrap" />').appendTo(i),y=$('<div class="date" />').appendTo(D),Y=$('<div class="middle-outer" />').appendTo(y),b=$('<div class="middle-inner" />').appendTo(Y);$('<div class="text" />').html("&nbsp;").appendTo(b),$('<div class="content" />').appendTo(y);v++}}else v%7==0&&(s=$("<tr />").appendTo(r));i=$("<td />").appendTo(s);D=$('<div class="date-wrap" />').appendTo(i),y=$('<div class="date" />').appendTo(D),Y=$('<div class="middle-outer" />').appendTo(y),b=$('<div class="middle-inner" />').appendTo(Y),$('<div class="text" />').text(T.date()).appendTo(b),$('<div class="content" />').appendTo(y);if(y.data("now",moment(T)),"function"==typeof C.dateIsAvailable&&C.dateIsAvailable(T)?y.addClass("enabled-").bind("select-date",function(){$(this).hasClass("enabled-")&&(r.find("td .date").not($(this).addClass("selected-")).trigger("unselect-date"),"function"==typeof C.onSelectDate&&C.onSelectDate($(this).data("now"),$(this)))}).bind("unselect-date",function(){$(this).removeClass("selected-"),"function"==typeof C.onUnselectDate&&C.onUnselectDate($(this).data("now"),$(this))}).click(function(){!C.allowSelectSelectedDate&&$(this).hasClass("selected-")?C.allowUnselectSelectedDate&&$(this).trigger("unselect-date"):$(this).trigger("select-date")}):y.addClass("disabled-"),C.selectToday&&T.format("YYYY-MM-DD")==moment(C.today).format("YYYY-MM-DD")&&y.addClass("today-").trigger("select-date"),"function"==typeof C.onDrawDate&&C.onDrawDate(T,y),v++,f+1==u.date())for(h=0;h<6-T.day();h++){i=$("<td />").appendTo(s);D=$('<div class="date-wrap" />').appendTo(i),y=$('<div class="date" />').appendTo(D),Y=$('<div class="middle-outer" />').appendTo(y),b=$('<div class="middle-inner" />').appendTo(Y),$('<div class="text" />').html("&nbsp;").appendTo(b),$('<div class="content" />').appendTo(y);v++}}r.find("tr").each(function(){$(this).find("td:first").addClass("sun")}),r.find("tr").each(function(){$(this).find("td:last").addClass("sat")}),"function"==typeof C.onDrawMonth&&C.onDrawMonth(a)}})};