function onYouTubeIframeAPIReady(){$($.dvideoQueue).each(function(){this()}),$.dvideoQueue=[]}$.dvideoParse=function(e){var t=/^(http|https):\/\/[w]{0,3}[\.]{0,1}(vimeo\.com|youtube\.com|youtu\.be)\/([^\/]+)/.exec(e),i={type:"",vid:""};if(!t||t.length<4)return!1;switch(i.type=t[2],i.vid=t[3],i.type){case"youtube.com":case"youtu.be":i.type="youtube";break;case"vimeo.com":i.type="vimeo"}if("youtube"==i.type){if(!(t=/^watch\?v=([a-zA-Z0-9_-]+)/.exec(i.vid))||t.length<2)return i;i.vid=t[1]}return i},$.dvideoImage=function(e,i){var t=$.dvideoParse(e);if(!t)return!1;switch(t.type){case"youtube":i("https://img.youtube.com/vi/"+t.vid+"/mqdefault.jpg");break;case"vimeo":$.getJSON("https://vimeo.com/api/v2/video/"+t.vid+".json?callback=?",function(e){var t=!1;0<e.length&&(t=e[0].thumbnail_large),i(t)})}},$.fn.dvideo=function(e,t,i,a,o,d){var n=this,s=$.dvideoParse(e);if(!s)return this;if("youtube"==s.type&&("undefined"==typeof YT||void 0===YT.Player)){var r=document.createElement("script");r.src="https://www.youtube.com/iframe_api";var u=document.getElementsByTagName("script")[0];return u.parentNode.insertBefore(r,u),$.dvideoQueue.push(function(){n.dvideo(e,t,i,a,o,d)}),this}var c=$("<div />").addClass("dvideo-view").appendTo(n),l=$("<div />").addClass("dvideo-target").appendTo(c);l.css("visibility","hidden");var v=9/16;switch(n.attr("data-ratio")&&(v=parseFloat(n.attr("data-ratio"))),c.css("padding-bottom",100*v+"%"),s.type){case"youtube":var p=$("<div />").appendTo(l),m=new YT.Player(p.get(0),{videoId:s.vid,playerVars:{playlist:s.vid,rel:0,playsinline:1,wmode:"transparent",controls:o?0:1,showinfo:0,modestbranding:0,loop:i?1:0,fs:1,autohide:1},events:{onStateChange:function(e){"force"===t&&e.data==YT.PlayerState.PAUSED&&setTimeout(function(){m.playVideo()},1e3)},onReady:function(e){d&&m.seekTo(d,!0),t&&m.playVideo(),f(l),"function"==typeof a&&a(l,e.target),l.css("visibility","visible")}}});break;case"vimeo":$.getJSON("https://vimeo.com/api/v2/video/"+s.vid+".json?callback=?",function(e){c.css("padding-bottom",e[0].height/e[0].width*100+"%"),l.attr("data-width",e[0].width),l.attr("data-height",e[0].height),l.html('<iframe src="https://player.vimeo.com/video/'+e[0].id+"?title=0&amp;byline=0&amp;portrait=0&amp;loop="+(i?"1":"0")+"&amp;autoplay="+(t?"1":"0")+'" width="100%" height="100%" frameborder="0" webkitallowfullscreen="1" mozallowfullscreen="1" allowfullscreen="1" allow="autoplay; encrypted-media"></iframe>'),f(l),"function"==typeof a&&a(l),l.css("visibility","visible")})}function f(e){if(!$("html").hasClass("ie")&&!$("html").hasClass("mobile"))new Plyr(e,{controls:["play","progress","fullscreen"],autoplay:t})}return this},$.fn.dvideoTrigger=function(){return this.each(function(){var e=$(this).empty().addClass("dvideo-trigger");$("<span />").addClass("dvideo-play").appendTo(e);$("<img />").appendTo(e).dvideoImage(e.attr("href"))})},$(document).bind("dofirst",function(e,t){$(t).find(".dvideo").each(function(){$(this).dvideo($(this).attr("data-url"))}),$(t).find("[data-dvideo-image]").each(function(){var t=$(this);$.dvideoImage(t.attr("data-dvideo-image"),function(e){e&&t.css({backgroundImage:"url("+e+")"}).imagesLoaded({background:!0},function(){t.closest(".opacity-0").addClass("opacity-1")})})})}),$.dvideoQueue=[];