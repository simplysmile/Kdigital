jQuery.extend({afuCreateUploadIframe:function(e,t){var r="jUploadFrame"+e,o='<iframe id="'+r+'" name="'+r+'" style="position:absolute; top:-9999px; left:-9999px"';return window.ActiveXObject&&("boolean"==typeof t?o+=' src="javascript:false"':"string"==typeof t&&(o+=' src="'+t+'"')),o+=" />",jQuery(o).appendTo(document.body),jQuery("#"+r).get(0)},afuCreateUploadForm:function(e,t,r){var o="jUploadForm"+e,n="jUploadFile"+e,a=jQuery('<form  action="" method="POST" name="'+o+'" id="'+o+'" enctype="multipart/form-data"></form>');if(r)for(var u in r)jQuery('<input type="hidden" name="'+u+'" value="'+r[u]+'" />').appendTo(a);var c=jQuery("#"+t),i=jQuery(c).clone();return jQuery(c).attr("id",n),jQuery(c).before(i),jQuery(c).appendTo(a),jQuery(a).css("position","absolute"),jQuery(a).css("top","-1200px"),jQuery(a).css("left","-1200px"),jQuery(a).appendTo("body"),a},ajaxFileUpload:function(n){var e=document.getElementById(n.fileElementId);if(e&&e.files){for(var t=104857600,r=0;r<e.files.length;r++)if(e.files[0].size>t)return void(n.success&&n.success({error:"100MB 보다 작은 파일만 업로드 가능합니다."},n));n=jQuery.extend({},jQuery.ajaxSettings,n);var o=(new Date).getTime(),a=jQuery.afuCreateUploadForm(o,n.fileElementId,void 0!==n.data&&n.data),u=(jQuery.afuCreateUploadIframe(o,n.secureuri),"jUploadFrame"+o),c="jUploadForm"+o;n.global&&!jQuery.active++&&jQuery.event.trigger("ajaxStart");var i=!1,s={};n.global&&jQuery.event.trigger("ajaxSend",[s,n]);function d(e){var t=document.getElementById(u);try{t.contentWindow?(s.responseText=t.contentWindow.document.body?t.contentWindow.document.body.innerText:null,s.responseXML=t.contentWindow.document.XMLDocument?t.contentWindow.document.XMLDocument:t.contentWindow.document):t.contentDocument&&(s.responseText=t.contentDocument.document.body?t.contentDocument.document.body.innerText:null,s.responseXML=t.contentDocument.document.XMLDocument?t.contentDocument.document.XMLDocument:t.contentDocument.document)}catch(e){"function"==typeof n.error&&s.responseText&&n.error(s.responseText)}if(s||"timeout"==e){var r;i=!0;try{if("error"!=(r="timeout"!=e?"success":"error")){var o=jQuery.afuUploadHttpData(s,n.dataType);n.success&&n.success(o,r),n.global&&jQuery.event.trigger("ajaxSuccess",[s,n])}else"function"==typeof n.error&&s.responseText&&n.error(s.responseText)}catch(e){r="error","function"==typeof n.error&&s.responseText&&n.error(s.responseText)}n.global&&jQuery.event.trigger("ajaxComplete",[s,n]),n.global&&!--jQuery.active&&jQuery.event.trigger("ajaxStop"),n.complete&&n.complete(s,r),jQuery(t).unbind(),setTimeout(function(){try{jQuery(t).remove(),jQuery(a).remove()}catch(e){"function"==typeof n.error&&s.responseText&&n.error(s.responseText)}},100),s=null}}0<n.timeout&&setTimeout(function(){i||d("timeout")},n.timeout);try{a=jQuery("#"+c);jQuery(a).attr("action",n.url),jQuery(a).attr("method","POST"),jQuery(a).attr("target",u),a.encoding?jQuery(a).attr("encoding","multipart/form-data"):jQuery(a).attr("enctype","multipart/form-data"),jQuery(a).submit()}catch(e){"function"==typeof n.error&&s.responseText&&n.error(s.responseText)}return jQuery("#"+u).on("load",d),{abort:function(){}}}alert("no file element")},afuUploadHttpData:function(r,type){var data=!type;return data="xml"==type||data?r.responseXML:r.responseText,"script"==type?jQuery.globalEval(data):"json"==type?eval("data = "+data):"html"==type&&jQuery("<div>").html(data).evalScripts(),data}});