$(function(){var a=$("#nav").find("> ul > li"),e=a.children("a, span"),n=300;a.bind("nav-over",function(){var e=$(this),a=e.children("ul");e.addClass("hovering-"),setTimeout(function(){e.addClass("hovered-"),a.stop().slideDown(n)},1)}).bind("nav-out",function(){var e=$(this),a=e.children("ul");e.removeClass("hovered-"),a.stop().slideUp(n,function(){a.removeAttr("style")}),setTimeout(function(){e.removeClass("hovering-")},n)}).hover(function(){if($.isPc()){var e=$(this);a.not(e.trigger("nav-over")).removeClass("nav-out")}},function(){$.isPc()&&$(this).trigger("nav-out")});var t=a.filter(".has-children");t.children("a, span");t.bind("sub-nav-open",function(){var e=$(this).addClass("opened-"),a=e.children("ul");0<a.length&&(a.is(":visible")&&a.hide(),a.stop().slideDown(n,function(){e.addClass("active");e.children("a, span").addClass("active current-")}))}).bind("sub-nav-close",function(){var e=$(this).removeClass("opened-"),a=e.children("ul");0<a.length&&a.slideUp(n,function(){e.removeClass("active");e.children("a, span").removeClass("active current-")})}),e.click(function(e){if($.isPhoneAndTablet()){var a=$(this),n=a.parent();n.hasClass("has-children")?(a.attr("href")&&(a.addClass("no-pjax"),e.preventDefault(),e.stopPropagation(),setTimeout(function(){a.removeClass("no-pjax")},1)),n.hasClass("opened-")?n.trigger("sub-nav-close"):t.not(n.trigger("sub-nav-open")).trigger("sub-nav-close")):t.trigger("sub-nav-close")}})}),$(document).bind("dofirst",function(e,a){$(a).find(".dcarousel-custom").each(function(){var t=$(this).dcarousel().addClass("dcarousel"),i=t.find(".owl-carousel");if(t.hasClass("dotted-carousel")){var e=null;function a(){e&&clearTimeout(e),e=setTimeout(function(){var e=i.find(".owl-item").removeClass("p1- p2- m1- m2-").filter(".center"),a=e.next();if(0<a.length){a.addClass("p1-");var n=a.next();0<n.length&&n.addClass("p2-")}var t=e.prev();if(0<t.length){t.addClass("m1-");var r=t.prev();0<r.length&&r.addClass("m2-")}},1)}i.on("changed.owl.carousel",a),a(),t.on("click",".owl-item.active:not(.center,.p2-,.m2-)",function(e){e.preventDefault(),e.stopPropagation();var a=t.find(".dcarousel-nav"),n=$(this).next();0<n.length&&n.hasClass("center")?a.find(".owl-prev").click():a.find(".owl-next").click()})}else if(t.hasClass("spread-carousel")){e=null;function a(){e&&clearTimeout(e),e=setTimeout(function(){var e=i.find(".owl-item").removeClass("p1- m1-").filter(".center"),a=e.next();0<a.length&&a.addClass("p1-");var n=e.prev();0<n.length&&n.addClass("m1-")},1)}i.on("changed.owl.carousel",a),a(),t.on("click",".owl-item.active:not(.center,.p2-,.m2-)",function(e){e.preventDefault(),e.stopPropagation();var a=t.find(".dcarousel-nav"),n=$(this).next();0<n.length&&n.hasClass("center")?a.find(".owl-prev").click():a.find(".owl-next").click()})}var n=$(t.attr("data-target-contents"));if(0<n.length){var r=null;function s(){r&&clearTimeout(r),r=setTimeout(function(){var e=i.find(".owl-item").filter(".center").find(".carousel-contents").html();n.html(e)},1)}i.on("changed.owl.carousel",s),s()}}),$(a).find(".accds").each(function(){var a=$(this).children(".item").children(".trigger");a.bind("open-accd",function(){var e=$(this).addClass("current-");e.parent().children(".body").slideDown(),console.log(a),a.not(e).trigger("close-accd")}).bind("close-accd",function(){$(this).removeClass("current-").parent().children(".body").slideUp()}).click(function(e){e.preventDefault();var a=$(this);a.hasClass("current-")?a.trigger("close-accd"):a.trigger("open-accd")})}),$(a).find(".collect-calendar").each(function(){var n=$(this),e=null,l=!1,t=n.find(".current-year"),c=n.find(".months");n.bind("load-rows",function(){var a=n.attr("data-year");t.text(a),l||(e&&clearTimeout(e),e=setTimeout(function(){var e="/calendar/json/year/"+a;l=!0,$.dget(e,function(e){l=!1,c.empty();for(var a=$("<div />").addClass("brand-list calendar-view-").appendTo(c),s=$("<div />").addClass("items").appendTo(a),n=1;n<=12;n++){var t;switch(n){case 10:t="X";break;case 11:t="XI";break;case 12:t="XII";break;default:t=n}var r=$("<div />").addClass("item month-"+n).appendTo(s),i=$("<div />").addClass("inner").appendTo(r),o=$("<span />").addClass("letter").appendTo(i);$("<span />").text(t).appendTo(o)}$(e.rows).each(function(){var e=this,a=s.find(".month-"+e.time);if(0<a.length){var n=a.children(".inner");if(0<n.length){n.hasClass("has-carousel-")||n.empty().addClass("has-carousel-");var t=n.find(".calendar-carousel");0==t.length&&(t=$("<div />").addClass("calendar-carousel").appendTo(n));var r=$("<a />").addClass("inner").attr("href","/stories/"+e.slug).appendTo(t),i=$("<span />").addClass("image circled-").appendTo(r);e.featured_image&&$("<span />").addClass("dcore-zoom-cover").css("background-image","url("+e.featured_image.furl+")").appendTo(i),$("<span />").addClass("title").text(e.title).appendTo(r)}}}),s.find(".calendar-carousel").each(function(){$(this).addClass("has-"+$(this).children(".inner").length+"-items-").dcarousel()})})},200))}).bind("prev-year",function(){var e=parseInt(n.attr("data-year"));n.attr("data-year",e-1).trigger("load-rows")}).bind("next-year",function(){var e=parseInt(n.attr("data-year"));n.attr("data-year",e+1).trigger("load-rows")}).trigger("load-rows"),n.find(".prev-year").click(function(e){e.preventDefault(),n.trigger("prev-year")}),n.find(".next-year").click(function(e){e.preventDefault(),n.trigger("next-year")})}),$(a).find("a.product-search-trigger").each(function(){$(this).click(function(e){e.preventDefault(),e.stopPropagation();var a=$(".product-search-wrap");0<a.length&&(a.hasClass("openinig-")&&a.hasClass("opened-")?a.trigger("close"):a.trigger("open"))})}),$(a).find(".product-search-wrap").bind("open",function(){var e=$(this);e.addClass("opening-"),setTimeout(function(){e.addClass("opened-")},10),$.isPc()&&0<e.find("input").length&&e.find("input").focus()}).bind("close",function(){var e=$(this);e.removeClass("opened-"),setTimeout(function(){e.removeClass("opening-")},300)}).each(function(){var a=$(this);a.find(".closer, .screen, a").click(function(e){a.trigger("close")})}),$(a).find('[id^="anchor-"]').each(function(){var e=$(this),a="anchor-"+location.hash.replace(/^#/,"");e.attr("id")==a&&setTimeout(function(){$("html, body").animate({scrollTop:e.offset().top-$("#header-padding").outerHeight()})},300)})});