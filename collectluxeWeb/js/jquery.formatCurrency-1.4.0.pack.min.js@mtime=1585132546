!function(u){function a(e){var r=u.formatCurrency.regions[e];if(r)return r;if(/(\w+)-(\w+)/g.test(e)){var t=e.replace(/(\w+)-(\w+)/g,"$1");return u.formatCurrency.regions[t]}return null}function i(e){if(""===e.symbol)return new RegExp("[^\\d"+e.decimalSymbol+"-]","g");var r=e.symbol.replace("$","\\$").replace(".","\\.");return new RegExp(r+"|[^\\d"+e.decimalSymbol+"-]","g")}u.formatCurrency={},u.formatCurrency.regions=[],u.formatCurrency.regions[""]={symbol:"$",positiveFormat:"%s%n",negativeFormat:"(%s%n)",decimalSymbol:".",digitGroupSymbol:",",groupDigits:!0},u.fn.formatCurrency=function(c,g){1==arguments.length&&"string"!=typeof c&&(g=c,c=!1);var e={name:"formatCurrency",colorize:!1,region:"",global:!0,roundToDecimalPlace:2,eventOnDecimalsEntered:!1};return e=u.extend(e,u.formatCurrency.regions[""]),0<(g=u.extend(e,g)).region.length&&(g=u.extend(g,a(g.region))),g.regex=i(g),this.each(function(){$this=u(this);var e="0";if(0<=(e=$this[$this.is("input, select, textarea")?"val":"html"]()).search("\\(")&&(e="-"+e),""!==e&&("-"!==e||-1!==g.roundToDecimalPlace)){if(isNaN(e)){if(""===(e=e.replace(g.regex,""))||"-"===e&&-1===g.roundToDecimalPlace)return;"."!=g.decimalSymbol&&(e=e.replace(g.decimalSymbol,".")),isNaN(e)&&(e="0")}var r=String(e).split("."),t=e==Math.abs(e),n=1<r.length,a=n?r[1].toString():"0",i=a;if(e=Math.abs(r[0]),e=isNaN(e)?0:e,0<=g.roundToDecimalPlace&&("2"==(a=(a=parseFloat("1."+a)).toFixed(g.roundToDecimalPlace)).substring(0,1)&&(e=Number(e)+1),a=a.substring(2)),e=String(e),g.groupDigits)for(var o=0;o<Math.floor((e.length-(1+o))/3);o++)e=e.substring(0,e.length-(4*o+3))+g.digitGroupSymbol+e.substring(e.length-(4*o+3));(n&&-1==g.roundToDecimalPlace||0<g.roundToDecimalPlace)&&(e+=g.decimalSymbol+a);var l=(t?g.positiveFormat:g.negativeFormat).replace(/%s/g,g.symbol);l=l.replace(/%n/g,e);var s=u([]);(s=c?u(c):$this)[s.is("input, select, textarea")?"val":"html"](l),n&&g.eventOnDecimalsEntered&&i.length>g.roundToDecimalPlace&&s.trigger("decimalsEntered",i),g.colorize&&s.css("color",t?"black":"red")}})},u.fn.toNumber=function(r){var e=u.extend({name:"toNumber",region:"",global:!0},u.formatCurrency.regions[""]);return 0<(r=jQuery.extend(e,r)).region.length&&(r=u.extend(r,a(r.region))),r.regex=i(r),this.each(function(){var e=u(this).is("input, select, textarea")?"val":"html";u(this)[e](u(this)[e]().replace("(","(-").replace(r.regex,""))})},u.fn.asNumber=function(e){var r=u.extend({name:"asNumber",region:"",parse:!0,parseType:"Float",global:!0},u.formatCurrency.regions[""]);0<(e=jQuery.extend(r,e)).region.length&&(e=u.extend(e,a(e.region))),e.regex=i(e),e.parseType=function(e){switch(e.toLowerCase()){case"int":return"Int";case"float":return"Float";default:throw"invalid parseType"}}(e.parseType);var t=u(this).is("input, select, textarea")?"val":"html",n=u(this)[t]();return n=(n=(n=n||"").replace("(","(-")).replace(e.regex,""),e.parse?(0==n.length&&(n="0"),"."!=e.decimalSymbol&&(n=n.replace(e.decimalSymbol,".")),window["parse"+e.parseType](n)):n}}(jQuery);