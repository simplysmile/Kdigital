!function(t){"use strict";"object"==typeof module&&"object"==typeof module.exports?t(require("jquery"),window,document):t(jQuery,window,document)}(function(E,b,C,P){"use strict";if(!b.history.pushState)return E.fn.smoothState=function(){return this},void(E.fn.smoothState.options={});if(!E.fn.smoothState){var T=E("html, body"),A=b.console,O={isExternal:function(t){var e=t.match(/^([^:\/?#]+:)?(?:\/\/([^\/?#]*))?([^?#]+)?(\?[^#]*)?(#.*)?/);return"string"==typeof e[1]&&0<e[1].length&&e[1].toLowerCase()!==b.location.protocol||"string"==typeof e[2]&&0<e[2].length&&e[2].replace(new RegExp(":("+{"http:":80,"https:":443}[b.location.protocol]+")?$"),"")!==b.location.host},stripHash:function(t){return t.replace(/#.*/,"")},isHash:function(t,e){e=e||b.location.href;var n=-1<t.indexOf("#"),o=O.stripHash(t)===O.stripHash(e);return n&&o},translate:function(t){var e={dataType:"html",type:"GET"};return t="string"==typeof t?E.extend({},e,{url:t}):E.extend({},e,t)},shouldLoadAnchor:function(t,e,n){var o=t.prop("href");return!(O.isExternal(o)||O.isHash(o)||t.is(e)||t.prop("target")||typeof n!==P&&""!==n&&-1===t.prop("href").search(n))},clearIfOverCapacity:function(t,e){return Object.keys||(Object.keys=function(t){var e,n=[];for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&n.push(e);return n}),Object.keys(t).length>e&&(t={}),t},storePageIn:function(t,e,n,o,r,a){var i=E("<html></html>").append(E(n));return void 0===r&&(r={}),void 0===a&&(a=e),t[e]={status:"loaded",title:i.find("title").first().text(),html:i.find("#"+o),doc:n,state:r,destUrl:a},t},triggerAllAnimationEndEvent:function(e,t){t=" "+t||"";var n=0;e.on("animationstart webkitAnimationStart oanimationstart MSAnimationStart",function(t){E(t.delegateTarget).is(e)&&(t.stopPropagation(),n++)}),e.on("animationend webkitAnimationEnd oanimationend MSAnimationEnd",function(t){E(t.delegateTarget).is(e)&&(t.stopPropagation(),0===--n&&e.trigger("allanimationend"))}),e.on("allanimationend"+t,function(){n=0,O.redraw(e)})},redraw:function(t){t.height()}},n=function(t,s){function l(t){(t=t||!1)&&p.hasOwnProperty(t)?delete p[t]:p={},h.data("smoothState").cache=p}function c(t,e){e=e||E.noop;var r=O.translate(t);if(!(p=O.clearIfOverCapacity(p,s.cacheLength)).hasOwnProperty(r.url)||void 0!==r.data){p[r.url]={status:"fetching"};var n=E.ajax(r);n.done(function(t){O.storePageIn(p,r.url,t,f),h.data("smoothState").cache=p}),n.fail(function(){p[r.url].status="error"}),s.locationHeader&&n.always(function(t,e,n){var o=(t.statusCode?t:n).getResponseHeader(s.locationHeader);o&&(p[r.url].destUrl=o)}),e&&n.always(e)}}function u(t){var e="#"+f,n=p[t]?E(p[t].html.html()):null;n.length?(C.title=p[t].title,h.data("smoothState").href=t,s.loadingClass&&T.removeClass(s.loadingClass),s.onReady.render(h,n),h.one("ss.onReadyEnd",function(){d=!1,s.onAfter(h,n),s.scroll&&function(){if(i){var t=E(i,h);if(t.length){var e=t.offset().top;T.scrollTop(e)}i=null}}(),w(h)}),b.setTimeout(function(){h.trigger("ss.onReadyEnd")},s.onReady.duration)):!n&&s.debug&&A?A.warn("No element with an id of "+e+" in response from "+t+" in "+p):b.location=t}function o(t,n,o){var r=O.translate(t);void 0===n&&(n=!0),void 0===o&&(o=!0);var a=!1,i=!1,e={loaded:function(){var t=a?"ss.onProgressEnd":"ss.onStartEnd";if(i&&a?i&&u(r.url):h.one(t,function(){u(r.url),o||l(r.url)}),n){var e=p[r.url].destUrl;g=s.alterChangeState({id:f},p[r.url].title,e),p[r.url].state=g,b.history.pushState(g,p[r.url].title,e)}i&&!o&&l(r.url)},fetching:function(){a||(a=!0,h.one("ss.onStartEnd",function(){s.loadingClass&&T.addClass(s.loadingClass),s.onProgress.render(h),b.setTimeout(function(){h.trigger("ss.onProgressEnd"),i=!0},s.onProgress.duration)})),b.setTimeout(function(){p.hasOwnProperty(r.url)&&e[p[r.url].status]()},10)},error:function(){s.debug&&A?A.log("There was an error loading: "+r.url):b.location=r.url}};p.hasOwnProperty(r.url)||c(r),s.onStart.render(h),b.setTimeout(function(){s.scroll&&T.scrollTop(0),h.trigger("ss.onStartEnd")},s.onStart.duration),e[p[r.url].status]()}function e(t){var e,n=E(t.currentTarget);O.shouldLoadAnchor(n,s.blacklist,s.hrefRegex)&&!d&&(t.stopPropagation(),e=O.translate(n.prop("href")),e=s.alterRequest(e),c(e))}function n(t){var e=E(t.currentTarget);if(!t.metaKey&&!t.ctrlKey&&O.shouldLoadAnchor(e,s.blacklist,s.hrefRegex)&&(t.stopPropagation(),t.preventDefault(),!y())){S();var n=O.translate(e.prop("href"));d=!0,i=e.prop("hash"),n=s.alterRequest(n),s.onBefore(e,h),o(n)}}function r(t){var e=E(t.currentTarget);if(!e.is(s.blacklist)&&(t.preventDefault(),t.stopPropagation(),!y())){S();var n={url:e.prop("action"),data:e.serialize(),type:e.prop("method")};d=!0,"get"===(n=s.alterRequest(n)).type.toLowerCase()&&(n.url=n.url+"?"+n.data),s.onBefore(e,h),o(n,P,s.allowFormCaching)}}var a,h=E(t),f=h.prop("id"),i=null,d=!1,p={},g={},m=b.location.href,v=0,y=function(){var t=null===s.repeatDelay,e=parseInt(Date.now())>v;return!(t||e)},S=function(){v=parseInt(Date.now())+parseInt(s.repeatDelay)},w=function(t){s.anchors&&s.prefetch&&t.find(s.anchors).not(s.prefetchBlacklist).on(s.prefetchOn,null,e)};return s=E.extend({},E.fn.smoothState.options,s),null===b.history.state?(g=s.alterChangeState({id:f},C.title,m),b.history.replaceState(g,C.title,m)):g={},O.storePageIn(p,m,C.documentElement.outerHTML,f,g),O.triggerAllAnimationEndEvent(h,"ss.onStartEnd ss.onProgressEnd ss.onEndEnd"),a=h,s.anchors&&(a.on("click",s.anchors,n),w(a)),s.forms&&a.on("submit",s.forms,r),{href:m,cache:p,clear:l,load:o,fetch:c,restartCSSAnimations:function(){var t=h.prop("class");h.removeClass(t),O.redraw(h),h.addClass(t)}}};b.onpopstate=function(t){if(null!==t.state){var e=b.location.href,n=E("#"+t.state.id).data("smoothState"),o=n.href!==e&&!O.isHash(e,n.href),r=t.state!==n.cache[n.href].state;(o||r)&&(r&&n.clear(n.href),n.load(e,!1))}},E.smoothStateUtility=O,E.fn.smoothState=function(e){return this.each(function(){var t=this.tagName.toLowerCase();this.id&&"body"!==t&&"html"!==t&&!E.data(this,"smoothState")?E.data(this,"smoothState",new n(this,e)):!this.id&&A?A.warn("Every smoothState container needs an id but the following one does not have one:",this):"body"!==t&&"html"!==t||!A||A.warn("The smoothstate container cannot be the "+this.tagName+" tag")})},E.fn.smoothState.options={debug:!1,anchors:"a",hrefRegex:"",forms:"form",allowFormCaching:!1,repeatDelay:500,blacklist:".no-smoothState",prefetch:!1,prefetchOn:"mouseover touchstart",prefetchBlacklist:".no-prefetch",locationHeader:"X-SmoothState-Location",cacheLength:0,loadingClass:"is-loading",scroll:!0,alterRequest:function(t){return t},alterChangeState:function(t,e,n){return t},onBefore:function(t,e){},onStart:{duration:0,render:function(t){}},onProgress:{duration:0,render:function(t){}},onReady:{duration:0,render:function(t,e){t.html(e)}},onAfter:function(t,e){}}}});