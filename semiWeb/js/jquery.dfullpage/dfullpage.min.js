$.fn.dfullpage=function(){return $(this).each(function(){var r=$(this),o=r.children(".item"),d=!1,f=r.attr("data-duration")?parseInt(r.attr("data-duration")):600,a=r;if(r.attr("data-sync-status")){var e=$(r.attr("data-sync-status"));0<e.length&&(a=e)}r.bind("dfullpage.move",function(e,t){void 0===t||void 0===t.to||d||(d=!0,$("html, body").stop().animate({scrollTop:t.to+"px"},{duration:f,complete:function(){d=!1,"function"==typeof t.complete&&t.complete()}}))}).bind("dfullpage.moveEnd",function(e){r.trigger("dfullpage.move",{to:r.offset().top+r.outerHeight(),complete:function(){o.trigger("dfullpage.incomplete")}})}).bind("dfullpage.prev",function(e){var t=o.filter(".active-");if(0<t.length){var a=t.prev();0<a.length&&a.trigger("dfullpage.move")}}).bind("dfullpage.next",function(e){var t=o.filter(".active-");if(0<t.length){var a=t.next();0<a.length?a.trigger("dfullpage.move"):r.trigger("dfullpage.moveEnd")}});var t=0;o.each(function(){$(this).attr("data-index",t),t++}).bind("dfullpage.active",function(){var t=$(this);t.addClass("active-"),a&&(o.each(function(){var e=$(this);t.attr("data-index")!=e.attr("data-index")&&a.removeClass("dfullpage-index-"+e.attr("data-index"))}),a.addClass("dfullpage-index-"+t.attr("data-index")))}).bind("dfullpage.inactive",function(){$(this).removeClass("active-")}).bind("dfullpage.complete",function(){$(this).addClass("complete-")}).bind("dfullpage.incomplete",function(){$(this).removeClass("complete-")}).bind("dfullpage.move",function(){var e=$(this);o.not(e.trigger("dfullpage.active")).trigger("dfullpage.inactive"),r.trigger("dfullpage.move",{to:e.offset().top,complete:function(){o.not(e.trigger("dfullpage.complete")).trigger("dfullpage.incomplete")}})}).filter(":first").trigger("dfullpage.active").trigger("dfullpage.complete"),o.length<=1||(o.on("mousewheel DOMMouseScroll",function(e){var t=$(this),a=0;event=event||window.event,event.wheelDelta?(a=event.wheelDelta/120,window.opera&&(a=-a)):event.detail&&(a=-event.detail/3),a<0?0<t.next().length&&(e.preventDefault(),t.next().trigger("dfullpage.move")):0<t.prev().length&&($(window).scrollTop()>t.offset().top?(e.preventDefault(),t.trigger("dfullpage.move")):(e.preventDefault(),t.prev().trigger("dfullpage.move")))}),o.each(function(e){var n=$(this),t=new Hammer.Manager(n.get(0));t.add(new Hammer.Pan({direction:Hammer.DIRECTION_VERTICAL}));var l="panend",a=0;function i(e){if("pan"==l){l="panend";var t=f,a=Math.abs(e.deltaY/e.velocityY);a<300&&(a=300),a<t&&(t=a),e.deltaY<0?0<n.next().length?(e.preventDefault(),d=!1,n.next().trigger("dfullpage.move")):(e.preventDefault(),o.trigger("dfullpage.inactive"),d=!1,r.trigger("dfullpage.moveEnd")):0<n.prev().length&&($(window).scrollTop()>n.offset().top?(e.preventDefault(),d=!1,n.trigger("dfullpage.move")):(e.preventDefault(),d=!1,n.prev().trigger("dfullpage.move")))}}t.on("panstart",function(e){if(!d){if("panend"!=l)return l="pan",void i(e);l="panstart",d=!0,a=$(window).scrollTop()}}).on("pan",function(e){"panstart"!=l&&"pan"!=l||(l="pan",Math.abs(e.deltaX)<50&&Math.abs(e.deltaY)>Math.abs(e.deltaX)&&(e.preventDefault(),$(window).scrollTop(a-e.deltaY)))}).on("panend",i)}))})},$(document).bind("dofirst",function(e,t){$(t).find(".dfullpage").dfullpage()});