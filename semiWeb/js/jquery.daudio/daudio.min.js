$.fn.daudio=function(c){return $(this).each(function(){$.extend(!0,{},c);var t=this;$(t).wrap($("<div />").addClass("daudio-wrap"));var a=$(t).parent(),d=$("<div />").addClass("daudio-outer").appendTo(a),n=$("<div />").addClass("daudio-buttons").appendTo(d),e=$("<div />").addClass("daudio-buttons-inner").appendTo(n),i=$("<button />").attr("type","button").addClass("daudio-play").appendTo(e),o=$("<button />").attr("type","button").addClass("daudio-pause").appendTo(e),u=$("<div />").addClass("daudio-progress").appendTo(d),s=$("<div />").addClass("daudio-progress-bar").appendTo(u),r=$("<div />").addClass("daudio-time").text("00:00").appendTo(d);function p(d){var a=parseInt(d),t=Math.floor(a/60);return t<10&&(t="0"+t),(a%=60)<10&&(a="0"+a),t+":"+a}$(t).attr("data-theme-class")&&a.addClass($(t).attr("data-theme-class")),i.click(function(d){d.preventDefault(),t.play(),a.addClass("daudio-playing"),$(".daudio-wrap .daudio-pause").not(o).click()}),o.click(function(d){d.preventDefault(),t.pause(),a.removeClass("daudio-playing")}),u.click(function(d){d.preventDefault(),i.click();var a=d.offsetX/u.outerWidth();t.currentTime=t.duration*a}),t.addEventListener("timeupdate",function(){var d=t.currentTime/t.duration*100;s.css("width",d+"%"),r.text(p(t.currentTime))},!1),t.addEventListener("canplaythrough",function(){r.text(p(t.duration))},!1),t.addEventListener("ended",function(){o.click()},!1),d.dofirst()})},$(document).bind("dofirst",function(d,a){$(a).find(".daudio").each(function(){$(this).daudio()})});