$(function(){var t,o=$("html"),i=$("#nav-group"),s=i.children(":first"),n=null;i.on("mousewheel DOMMouseScroll",function(n){n.stopPropagation()}),$("body").on("touchstart",function(n){t=n.originalEvent.changedTouches[0].clientY}).on("touchmove",function(n){if(o.hasClass("nav-opened")){var e=i.scrollTop(),a=n.originalEvent.changedTouches[0].clientY;(t<a&&e<=0||a<t&&e>=Math.floor(s.outerHeight()-i.outerHeight()))&&n.preventDefault(),t=a}}),i.on("touchmove",function(n){i.outerHeight()>s.outerHeight()&&(n.preventDefault(),n.stopPropagation())}),o.bind("nav-open",function(){o.hasClass("nav-opening")||o.hasClass("nav-opened")||(o.addClass("nav-opening"),n&&clearTimeout(n),n=setTimeout(function(){o.addClass("nav-opened")},50))}).bind("nav-close",function(){o.hasClass("nav-opening")&&o.hasClass("nav-opened")&&(o.removeClass("nav-opened"),n&&clearTimeout(n),n=setTimeout(function(){o.removeClass("nav-opening")},600))}),$("#nav-trigger").click(function(n){n.preventDefault(),o.hasClass("nav-opening")?o.trigger("nav-close"):o.trigger("nav-open")}),$("#nav a, .nav-closer").click(function(){if($.isPhoneAndTablet()&&$(this).hasClass("has-children"))return;o.trigger("nav-close")}),$("#nav a:not([target])").click(function(){$(this).attr("href").match(/#/)||$(this).addClass("current-")}),$("#nav > ul ul > li.has-children > span").each(function(){var n=$(this),e=n.parent().find("> ul > li > a:first").attr("href");n.click(function(n){e&&$.pjaxRedirect(e)})})});